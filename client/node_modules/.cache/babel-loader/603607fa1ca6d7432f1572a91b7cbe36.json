{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tomts\\\\source\\\\repos\\\\CodingDojo\\\\Dojo_Exams\\\\mern_exam_dev\\\\client\\\\src\\\\App.js\";\nimport React from 'react';\nimport { Container, Tabs, Tab } from 'react-bootstrap';\nimport { Router, Link, navigate } from '@reach/router';\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport Cookies from 'js-cookie';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport AppNavBar from './components/AppNavBar';\nimport UserRegistration from './components/UserRegistration';\n\nfunction App() {\n  const [socket] = React.useState(() => io(\":8000\"));\n  const [chatMessages, setChatMessages] = React.useState([]);\n  const [chatMessage, setChatMessage] = React.useState(\"\");\n  const [displayName, setDisplayName] = React.useState(\"\");\n  const [userName, setUserName] = React.useState(\"\");\n  const [email, setEmail] = React.useState(\"\");\n  const [requireLogin, setRequireLogin] = React.useState(false);\n  React.useEffect(() => {\n    socket.on('new_message_from_server', msg => {\n      setChatMessages(prevMessages => {\n        return [msg, ...prevMessages];\n      });\n    });\n    getAuthenticatedUser();\n    setDisplayName(Cookies.get('displayname'));\n    setUserName(Cookies.get('username'));\n    setEmail(Cookies.get('email')); // redirect not working on EC2/nginx, fails with 502 bad gateway. Allow disable of registration/login requirement\n\n    if (requireLogin && userName === \"UNINITIALIZED\") {\n      navigate(\"/register\");\n    }\n  }, [userName, requireLogin]);\n\n  const logoutAuthenticatedUser = () => {\n    axios.post(\"http://localhost:8000/login/logout\", {}, {\n      withCredentials: true\n    }).then(response => {\n      window.location = \"/\";\n    }).catch(err => alert(err));\n  };\n\n  const getAuthenticatedUser = () => {\n    axios.get(\"http://localhost:8000/login/getauthenticateduser\", {\n      withCredentials: true\n    }).then(response => {}).catch(err => alert(err));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AppNavBar, {\n    appTitle: \"Mern Exam App\",\n    displayName: displayName,\n    googleLoginUrl: \"http://localhost:8000/login/google_redirect\",\n    githubLoginUrl: \"http://localhost:8000/login/github_redirect\",\n    logout: logoutAuthenticatedUser,\n    requireLogin: requireLogin,\n    setRequireLogin: setRequireLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Tab.Container, {\n    path: \"/\",\n    id: \"left-tabs-example\",\n    defaultActiveKey: \"first\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Nav, {\n    variant: \"pills\",\n    className: \"flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    eventKey: \"first\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, \"Tab 1\")), /*#__PURE__*/React.createElement(Nav.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    eventKey: \"second\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, \"Tab 2\")))), /*#__PURE__*/React.createElement(Col, {\n    sm: 9,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Tab.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Tab.Pane, {\n    eventKey: \"first\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Sonnet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Tab.Pane, {\n    eventKey: \"second\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Sonnet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  })))))), /*#__PURE__*/React.createElement(UserRegistration, {\n    path: \"/register\",\n    setUserName: setUserName,\n    userName: userName,\n    email: email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }))));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/tomts/source/repos/CodingDojo/Dojo_Exams/mern_exam_dev/client/src/App.js"],"names":["React","Container","Tabs","Tab","Router","Link","navigate","axios","io","Cookies","AppNavBar","UserRegistration","App","socket","useState","chatMessages","setChatMessages","chatMessage","setChatMessage","displayName","setDisplayName","userName","setUserName","email","setEmail","requireLogin","setRequireLogin","useEffect","on","msg","prevMessages","getAuthenticatedUser","get","logoutAuthenticatedUser","post","withCredentials","then","response","window","location","catch","err","alert"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Container, Tabs, Tab } from 'react-bootstrap';\nimport { Router, Link, navigate } from '@reach/router';\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport Cookies from 'js-cookie';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport AppNavBar from './components/AppNavBar';\nimport UserRegistration from './components/UserRegistration';\n\nfunction App() {\n  const [socket] = React.useState(() => io(\":8000\"));\n  const [chatMessages, setChatMessages] = React.useState([]);\n  const [chatMessage, setChatMessage] = React.useState(\"\");\n  const [displayName, setDisplayName] = React.useState(\"\");\n  const [userName, setUserName] = React.useState(\"\");\n  const [email, setEmail] = React.useState(\"\");\n  const [requireLogin, setRequireLogin] = React.useState(false);\n  \n  React.useEffect(() => {\n    socket.on('new_message_from_server', msg => {\n      setChatMessages(prevMessages => { return [msg, ...prevMessages]})\n    });\n    getAuthenticatedUser();\n    setDisplayName(Cookies.get('displayname'));\n    setUserName(Cookies.get('username'));\n    setEmail(Cookies.get('email'));\n    // redirect not working on EC2/nginx, fails with 502 bad gateway. Allow disable of registration/login requirement\n    if (requireLogin && userName === \"UNINITIALIZED\") {  \n      navigate(\"/register\")\n    }\n  },[userName, requireLogin]);\n\n  const logoutAuthenticatedUser = () => {\n    axios.post(\"http://localhost:8000/login/logout\", {}, { withCredentials: true })\n    .then(response => {\n      window.location = \"/\";\n    })\n    .catch(err => alert(err));\n  }\n  const getAuthenticatedUser = () => {\n    axios.get(\"http://localhost:8000/login/getauthenticateduser\", { withCredentials: true })\n    .then(response => {\n    })\n    .catch(err => alert(err));\n  }\n  return (\n    <div className=\"App\">\n      <AppNavBar\n        appTitle=\"Mern Exam App\"\n        displayName={displayName}\n        googleLoginUrl=\"http://localhost:8000/login/google_redirect\"\n        githubLoginUrl=\"http://localhost:8000/login/github_redirect\"\n        logout={logoutAuthenticatedUser}\n        requireLogin={requireLogin}\n        setRequireLogin={setRequireLogin}\n        />\n        <Container>\n          <Router>\n          <Tab.Container path=\"/\" id=\"left-tabs-example\" defaultActiveKey=\"first\">\n  <Row>\n    <Col sm={3}>\n      <Nav variant=\"pills\" className=\"flex-column\">\n        <Nav.Item>\n          <Nav.Link eventKey=\"first\">Tab 1</Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link eventKey=\"second\">Tab 2</Nav.Link>\n        </Nav.Item>\n      </Nav>\n    </Col>\n    <Col sm={9}>\n      <Tab.Content>\n        <Tab.Pane eventKey=\"first\">\n          <Sonnet />\n        </Tab.Pane>\n        <Tab.Pane eventKey=\"second\">\n          <Sonnet />\n        </Tab.Pane>\n      </Tab.Content>\n    </Col>\n  </Row>\n</Tab.Container>\n            <UserRegistration path=\"/register\" setUserName={setUserName} userName={userName} email={email}/>\n          </Router>\n        </Container>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}